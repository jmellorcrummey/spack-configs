spack:
  concretizer:
    unify: false
  view: false
  packages:
    mpi:
      buildable: False
      require: openmpi ~cuda
    openmpi:
      externals:
      - spec: openmpi@4.1.5 ~cuda fabrics=ucx schedulers=none %gcc@8.5.0
        modules: [gcc/8.5.0, openmpi/4.1.5/cpu]
    python:
      buildable: False
  specs:
  - matrix:
    - ['hpctoolkit ~viewer ~papi +mpi']
    - ['@2023.08.1 ^dyninst@12.3.0 ^libmonitor@2023.03.15']
    - ['+rocm ^hip@5.4.3 ^hsa-rocr-dev@5.4.3 ^roctracer-dev@5.4.3 ^rocprofiler-dev@5.4.3']
    - ['+cuda ^cuda@11.8.0', '+cuda ^cuda@12.2.1']
    - ['%gcc@8.5.0']
